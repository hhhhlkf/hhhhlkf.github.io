<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Llvm on Linexus blog</title>
    <link>https://hhhhlkf.github.io/tags/llvm/</link>
    <description>Recent content in Llvm on Linexus blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 01 May 2023 18:32:11 +0800</lastBuildDate>
    <atom:link href="https://hhhhlkf.github.io/tags/llvm/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>LLVM IR部分常用语法——支持Sysy2022中间代码生成</title>
      <link>https://hhhhlkf.github.io/post/llvm-ir%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E6%94%AF%E6%8C%81sysy2022%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/</link>
      <pubDate>Mon, 01 May 2023 18:32:11 +0800</pubDate>
      <guid>https://hhhhlkf.github.io/post/llvm-ir%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E6%94%AF%E6%8C%81sysy2022%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/</guid>
      <description>&lt;h1 id=&#34;llvm-ir常用语法&#34;&gt;LLVM IR常用语法&lt;/h1&gt;&#xA;&lt;h2 id=&#34;加减乘除指令&#34;&gt;加减乘除指令&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1加法指令add&#34;&gt;1.加法指令（add）&lt;/h3&gt;&#xA;&lt;p&gt;加法指令用于对两个数值进行相加。在 LLVM 中，加法指令的语法如下所示：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%result&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; add &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;type&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;value1&amp;gt;&lt;/span&gt;, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;value2&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;例如，如果我们想将两个整数相加并得到一个整数结果，可以使用以下指令：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%result&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; add i32 &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%x&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; add i32 &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%x&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; add i32 &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%a&lt;/span&gt;, &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%b&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%z&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; add i32 &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%x&lt;/span&gt;, &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%y&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里，&lt;code&gt;&amp;lt;type&amp;gt;&lt;/code&gt;指定为 &lt;code&gt;i32&lt;/code&gt;，&lt;code&gt;&amp;lt;value1&amp;gt;&lt;/code&gt;为整数值 &lt;code&gt;1&lt;/code&gt;，&lt;code&gt;&amp;lt;value2&amp;gt;&lt;/code&gt;为整数值 &lt;code&gt;2&lt;/code&gt;，&lt;code&gt;&amp;lt;result&amp;gt;&lt;/code&gt;为整数类型 &lt;code&gt;i32&lt;/code&gt;。各种类型的内存空间大小（以位为单位）如下：&lt;/p&gt;&#xA;&lt;p&gt;在LLVM中，&lt;code&gt;add&lt;/code&gt;指令的 &lt;code&gt;&amp;lt;type&amp;gt;&lt;/code&gt;参数指定了 &lt;code&gt;&amp;lt;value1&amp;gt;&lt;/code&gt;和 &lt;code&gt;&amp;lt;value2&amp;gt;&lt;/code&gt;的类型，同时也指定了 &lt;code&gt;&amp;lt;result&amp;gt;&lt;/code&gt;的类型。支持的类型包括：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;整数类型：&lt;code&gt;i1&lt;/code&gt;, &lt;code&gt;i8&lt;/code&gt;, &lt;code&gt;i16&lt;/code&gt;, &lt;code&gt;i32&lt;/code&gt;, &lt;code&gt;i64&lt;/code&gt;, &lt;code&gt;i128&lt;/code&gt;等；&lt;/li&gt;&#xA;&lt;li&gt;浮点类型：&lt;code&gt;half&lt;/code&gt;, &lt;code&gt;float&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;, &lt;code&gt;fp128&lt;/code&gt;等；&lt;/li&gt;&#xA;&lt;li&gt;向量类型：&lt;code&gt;&amp;lt;n x i8&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;n x i16&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;n x i32&amp;gt;&lt;/code&gt;等；&lt;/li&gt;&#xA;&lt;li&gt;指针类型：&lt;code&gt;i8*&lt;/code&gt;, &lt;code&gt;i32*&lt;/code&gt;, &lt;code&gt;float*&lt;/code&gt;等；&lt;/li&gt;&#xA;&lt;li&gt;标签类型：&lt;code&gt;metadata&lt;/code&gt;；&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;浮点加法&#34;&gt;浮点加法&lt;/h4&gt;&#xA;&lt;p&gt;加法指令还有一种形式，可以用于计算两个浮点数之间的差值。语法为：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%result&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; fadd &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;type&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;value1&amp;gt;&lt;/span&gt;, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;lt;value2&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2减法指令sub&#34;&gt;2.减法指令（sub）&lt;/h3&gt;&#xA;&lt;p&gt;减法指令用于对两个数值进行相减，语法为：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;%result&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;sub&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#50fa7b&#34;&gt;type&lt;/span&gt;&amp;gt; &amp;lt;&lt;span style=&#34;color:#50fa7b&#34;&gt;value1&lt;/span&gt;&amp;gt;, &amp;lt;&lt;span style=&#34;color:#50fa7b&#34;&gt;value2&lt;/span&gt;&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其中，&lt;code&gt;&amp;lt;type&amp;gt;&lt;/code&gt; 表示要进行减法运算的值的数据类型，可以是整数、浮点数等；&lt;code&gt;&amp;lt;value1&amp;gt;&lt;/code&gt; 和 &lt;code&gt;&amp;lt;value2&amp;gt;&lt;/code&gt; 分别表示相减的两个数，可以是常量、寄存器或者其他指令的结果。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
